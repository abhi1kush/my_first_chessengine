main()
      \
       { Allinit()
                \
                {
                  initsq120to64();
                  initbitmasks();
                  inithashkeys();
                  initfilsbrd();
                }
        parse_fen(FEN,board)
                            \
                            {
                              resetboard(pos);
                              updatematerial(pos);
                            }
        generateallmoves(board,list)
                                    \
                                    {
                                      ASSERT(checkboard(pos));
                                                              \
                                                              {ASSERT(generateposkey(pos))}
                                      addwhitepawnmoves()
                                      addwhitepawncapmove()
                                                           \
                                                           {
                                                             ASSERT(piecevalidempty(cap))
                                                             ASSERT(sqonboard(from))
                                                             ASSERT(sqonboard(to))
                                                             addcapturemove()
                                                           }
                                      addcapturemove()                                      addblackpawnmoves()
                                      addblackpawncapmove()
                                                           \
                                                           {
                                                             ASSERT(piecevalidempty(cap))
                                                             ASSERT(sqonboard(from))
                                                             ASSERT(sqonboard(to))
                                                             addcapturemove()
                                                           }                                      addcapturemove()
                                      addquietemove()
                                      sqattacked()
                                                  \
                                                  {
                                                    ASSERT(sqonboard(sq));
                                                    ASSERT(sidevalid(side));
                                                    ASSERT(checkboard(pos));
                                                                           \
                                                                            {ASSERT(generateposkey(pos))}
                                                                          
                                                  }
                                      addquietemove()
                                     ASSERT(sqonboard(sq));
                                    }
        
        printboard(board)
        printmovelist(list)
        for{{
            makemove(board,move)
                                \
                                {
                                
                                  ASSERT(checkboard(pos));
                                                         \
                                                          {ASSERT(generateposkey(pos))}
                                  ASSERT(sqonboard(sq));
                                  ASSERT(sidevalid(side));
                                  ASSERT(piecevalid(pos->pieces[from]));
                                  clearpiece(to,pos);
                                  movepiece(from,to,pos);
                                  addpiece(to,pos,prompce);
                                  ASSERT(checkboard(pos));
                                                         \
                                                          {ASSERT(generateposkey(pos))}
                                  sqattacked(pos->kingsq[side],pos->side,pos);
                                }
            prmove(move)
                        \
                        {
                          filesbrd();
                          ranksbrd();
                        }
            takemove(board)
            prmove()
            printboard(board)
           }}
        getchar()
       }

